entry_point: plan_input
finish_points: 
  - summary_node

nodes:
  - name: plan_input
    agent: plan_input_agent
    config:
      model_name: "qwen3:8b"
      max_iterations: 20000000
      timeout: 3000

  - name: validation
    agent: validation_agent
    config:
      model_name: "qwen3:8b"
      max_iterations: 20000000
      timeout: 3000

  - name: loan_recommend
    agent: loan_agent
    config:
      model_name: "qwen3:8b"
      max_iterations: 20000000
      timeout: 3000

  - name: saving_recommend
    agent: saving_agent
    config:
      model_name: "qwen3:8b"
      max_iterations: 20000000
      timeout: 3000

  - name: fund_recommend
    agent: fund_agent
    config:
      model_name: "qwen3:8b"
      max_iterations: 20000000
      timeout: 3000

  - name: summary_node
    agent: summary_agent
    config:
      model_name: "qwen3:8b"
      max_iterations: 20000000
      timeout: 3000

edges:
  - from: validation
    to: loan_recommend

  - from: loan_recommend
    to: saving_recommend



# =========================
# 3) 조건부 엣지 (입력 노드 전용)
#    👉 is_complete 기준으로 자기 자신 루프 or 다음 노드
# =========================
conditional_edges:
  # 3-1) 주택 자금 계획 입력 (plan_input)
  - from: plan_input
    router: PlanInputRouter
    paths:
      CONTINUE: plan_input         # 아직 입력 부족 -> 다시 plan_input
      NEXT: validation             # 입력 완료 -> validation 노드로 진행

  # 3-2) 적금/예금 추천 노드 (saving_recommend)
  - from: saving_recommend
    router: SavingRouter
    paths:
      CONTINUE: saving_recommend   # 추가 질문 필요 -> 다시 saving_recommend
      NEXT: fund_recommend         # 입력/추천 완료 -> 펀드 추천으로

  # 3-3) 펀드 추천 노드 (fund_recommend)
  - from: fund_recommend
    router: FundRouter
    paths:
      CONTINUE: fund_recommend     # 추가 질문 필요 -> 다시 fund_recommend
      NEXT: summary_node           # 펀드 추천까지 끝 -> 요약/리포트 노드로