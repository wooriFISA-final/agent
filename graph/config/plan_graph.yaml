# ============================================
# Plan Graph Configuration
# ============================================
# ì¬ë¬´ ê³„íš ê´€ë ¨ ê·¸ë˜í”„
# - supervisor_agentê°€ ì „ì²´ í”Œë¡œìš°ë¥¼ ì¡°ìœ¨
# - ì…ë ¥(input) â†’ ê²€ì¦(validation) â†’ (loan / saving / fund / summary) ë‹¨ê³„ ì§„í–‰
# ============================================

# ============================================
# Agent ë…¸ë“œ ì •ì˜
# ============================================
nodes:
  # 0) Supervisor Agent
  - name: supervisor_agent
    agent: supervisor_agent
    config:
      max_iterations: 10
      timeout: 300

  # 1) ì‚¬ìš©ì ì£¼íƒ í”Œëœ ì…ë ¥ Agent
  - name: input_agent
    agent: plan_input_agent
    config:
      max_iterations: 15
      timeout: 300

  # 2) ì…ë ¥ ê²€ì¦ / ì •ê·œí™” Agent
  - name: validation_agent
    agent: validation_agent
    config:
      max_iterations: 10
      timeout: 240

  # 3) ëŒ€ì¶œ í•œë„/ì¶”ì²œ Agent
  - name: loan_agent
    agent: loan_agent
    config:
      max_iterations: 10
      timeout: 240

  # 4) ì˜ˆÂ·ì ê¸ˆ ì¶”ì²œ + ì¶”ê°€ ì…ë ¥ Agent
  - name: saving_agent
    agent: saving_agent
    config:
      max_iterations: 15
      timeout: 240

  # 5) í€ë“œ ì¶”ì²œ + ì¶”ê°€ ì…ë ¥ Agent
  - name: fund_agent
    agent: fund_agent
    config:
      max_iterations: 15
      timeout: 240

  # 6) ìµœì¢… ìš”ì•½ ë¦¬í¬íŠ¸ Agent
  - name: summary_agent
    agent: summary_agent
    config:
      max_iterations: 10
      timeout: 300

# ============================================
# Edge ì •ì˜
# ============================================
edges:
  # ------------------------------------------------
  # Direct edges (ë‹¨ìˆœ ê³ ì • íë¦„)
  #   ğŸ‘‰ í•œ í„´ì— supervisor + ì›Œì»¤ í•˜ë‚˜ë§Œ ì‹¤í–‰í•˜ê¸° ìœ„í•´
  #      ê¸°ì¡´ direct edgeë“¤ì„ ëª¨ë‘ ì œê±°í•œë‹¤.
  # ------------------------------------------------
  direct: []

  # ------------------------------------------------
  # Conditional edges (DynamicRouter ì‚¬ìš©)
  #   - supervisor_agentê°€ stateë¥¼ ë³´ê³  ë‹¤ìŒ ì›Œì»¤ë¥¼ ì„ íƒ
  #   - ì„ íƒëœ ì›Œì»¤ì—ì„œ ë°”ë¡œ ENDë¡œ ì¢…ë£Œ (finish_points ì„¤ì • ë•Œë¬¸)
  # ------------------------------------------------
  conditional:
    - from: supervisor_agent
      router: DynamicRouter
      paths:
        input_agent: input_agent
        validation_agent: validation_agent
        loan_agent: loan_agent
        saving_agent: saving_agent
        fund_agent: fund_agent
        summary_agent: summary_agent
        END: __end__

# ============================================
# Graph ì„¤ì •
# ============================================
entry_point: supervisor_agent

finish_points:
  # âœ… ì´ì œ ê° ë‹¨ê³„ ì—ì´ì „íŠ¸ê°€ "ë§ˆì§€ë§‰ ë°œí™”ì"ê°€ ë˜ë„ë¡ ì„¤ì •
  #    í•œ ë²ˆì˜ /chat/plan í˜¸ì¶œ = supervisor + ì´ ì¤‘ í•˜ë‚˜ë§Œ ì‹¤í–‰
  - input_agent
  - validation_agent
  - loan_agent
  - saving_agent
  - fund_agent
  - summary_agent
